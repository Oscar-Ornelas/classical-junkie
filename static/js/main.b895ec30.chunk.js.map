{"version":3,"sources":["imgs/home_background.PNG","components/Home.js","components/Player.js","components/PlayerFooter.js","App.js","index.js"],"names":["module","exports","Home","props","className","style","backgroundImage","home_background","href","authEndpoint","clientId","redirectUri","scopes","join","Player","useState","searchInput","setSearchInput","data","setData","textRef","useRef","useEffect","window","onSpotifyWebPlaybackSDKReady","Spotify","name","getOAuthToken","cb","token","connect","type","value","onChange","e","target","onClick","preventDefault","fetch","split","method","headers","Authorization","then","response","json","console","log","undefined","tracks","items","map","item","key","uri","body","JSON","stringify","uris","setCurrentUri","ref","artists","artist","src","album","images","url","PlayerFooter","currentlyPlaying","setCurrentlyPlaying","progressMs","setProgressMs","durationMs","setDurationMs","isPlaying","setIsPlaying","progressStyles","setProgressStyles","setTimeout","duration_ms","progress_ms","is_playing","currentUri","timeoutId","width","prevProgressMs","clearTimeout","App","setToken","history","useHistory","hash","location","substring","reduce","initial","parts","decodeURIComponent","accessToken","access_token","push","exact","path","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.b895ec30.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/home_background.3af6fdb3.PNG\";","import React from 'react';\r\nimport home_background from '../imgs/home_background.PNG';\r\n\r\nfunction Home(props) {\r\n  return (\r\n    <div className=\"home\" style={{backgroundImage: `url(${home_background})`}}>\r\n      <div className=\"home-container\">\r\n        <h1 className=\"home-header\">Classical Junkie</h1>\r\n        <p className=\"home-subtitle\">Scratch your classical music itch and listen to the classics you've been searching for</p>\r\n        <a\r\n          className=\"home-btn-link\"\r\n          href={`${props.authEndpoint}?client_id=${props.clientId}&redirect_uri=${props.redirectUri}&scope=${props.scopes.join(\"%20\")}&response_type=token&show_dialog=true`}\r\n        >\r\n          Login to Spotify\r\n        </a>\r\n        <p className=\"home-attribution\">Powered By the Spotify Web API and Web Playback SDK</p>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Home;\r\n","import React, {useState, useEffect, useRef} from \"react\";\r\nimport ReactPlayer from 'react-player';\r\n\r\nfunction Player(props) {\r\n  const [searchInput, setSearchInput] = useState(\"\");\r\n  const [data, setData] = useState({});\r\n  const textRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    window.onSpotifyWebPlaybackSDKReady = () => {\r\n      const player = new window.Spotify.Player({\r\n        name: 'Web Playback SDK Quick Start Player',\r\n        getOAuthToken: cb => { cb(props.token); }\r\n      });\r\n\r\n      player.connect()\r\n    };\r\n  }, [])\r\n\r\n  function handleChange(e) {\r\n    const {value} = e.target;\r\n    setSearchInput(value);\r\n  }\r\n\r\n  function play(uri) {\r\n    fetch(\"https://api.spotify.com/v1/me/player/play\", {\r\n      method: 'PUT',\r\n      body: JSON.stringify({ uris: [uri] }),\r\n      headers: {\r\n        Authorization: `Bearer ${props.token}`\r\n      }\r\n    })\r\n    props.setCurrentUri(uri);\r\n  }\r\n\r\n  function search(e) {\r\n    e.preventDefault();\r\n    fetch(`https://api.spotify.com/v1/search?q=${searchInput.split(\" \").join('%20')}&type=artist,track&limit=5`, {\r\n      method: 'GET',\r\n      headers: {\r\n        Authorization: `Bearer ${props.token}`\r\n      }\r\n    })\r\n    .then(response => response.json())\r\n    .then(data => {\r\n      console.log(data);\r\n      setData(data);\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div className=\"search-container container\">\r\n      <h1 className=\"search-header\">Search</h1>\r\n      <form className=\"search-form\">\r\n        <input className=\"search-input\" type=\"text\" value={searchInput} onChange={handleChange}/>\r\n        <button className=\"search-btn\" onClick={search}><i className=\"fas fa-search\"></i></button>\r\n      </form>\r\n      {data.tracks === undefined ? (\r\n        <div className=\"search-empty\">\r\n          <i className=\"fas fa-search\"></i>\r\n          <p className=\"search-call-to-action\">Search Classical Junkie</p>\r\n          <p>Find your favorite classical music and artists.</p>\r\n        </div>\r\n      ) : (\r\n        <ul className=\"search-list\">\r\n          {data.tracks !== undefined && data.tracks.items.map(item => (\r\n            <div className=\"search-item\" key={item.uri}>\r\n              <div className=\"search-item-main\" onClick={() => play(item.uri)}>\r\n                <div className=\"search-item-info\">\r\n                  <p className=\"search-item-name\" ref={textRef}>{item.name}</p>\r\n                  <p className=\"search-item-artists\">{item.type === \"track\" ? \"Song\" : item.type} <i className=\"fas fa-circle\"></i> {item.artists.map(artist => artist.name).join(\", \")}</p>\r\n                </div>\r\n                <img className=\"search-img\" src={item.album.images[1].url}/>\r\n              </div>\r\n              <i onClick={() => console.log(\"Hello\")} className=\"fas fa-ellipsis-v\"></i>\r\n            </div>\r\n          ))}\r\n        </ul>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Player;\r\n","import React, {useState, useEffect} from 'react';\r\n\r\nfunction PlayerFooter(props) {\r\n  const [currentlyPlaying, setCurrentlyPlaying] = useState(null);\r\n  const [progressMs, setProgressMs] = useState(0);\r\n  const [durationMs, setDurationMs] = useState(0);\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [progressStyles, setProgressStyles] = useState({});\r\n\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n      fetch(\"https://api.spotify.com/v1/me/player/currently-playing\", {\r\n        method: 'GET',\r\n        headers: {\r\n          Authorization: `Bearer ${props.token}`\r\n        }\r\n      })\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        setCurrentlyPlaying(data)\r\n        setDurationMs(data.item.duration_ms)\r\n        setProgressMs(0)\r\n        setProgressMs(data.progress_ms)\r\n        setIsPlaying(data.is_playing)\r\n        console.log(data)\r\n      })\r\n    }, 1000)\r\n\r\n  }, [props.currentUri])\r\n\r\n  useEffect(() => {\r\n    if(currentlyPlaying && progressMs < durationMs && isPlaying) {\r\n      const timeoutId = setTimeout(() => {\r\n        setProgressStyles({width: `${progressMs * 100 / durationMs}%`});\r\n        setProgressMs(prevProgressMs => prevProgressMs + 12);\r\n      }, 10)\r\n\r\n      return () => clearTimeout(timeoutId);\r\n\r\n    } else {\r\n      setProgressStyles({width: \"0%\"});\r\n    }\r\n  }, [progressMs, isPlaying])\r\n\r\n  function play() {\r\n    fetch(\"https://api.spotify.com/v1/me/player/play\", {\r\n      method: 'PUT',\r\n      headers: {\r\n        Authorization: `Bearer ${props.token}`\r\n      }\r\n    })\r\n    .then(() => setIsPlaying(true))\r\n  }\r\n\r\n  function pause() {\r\n    fetch(\"https://api.spotify.com/v1/me/player/pause\", {\r\n      method: 'PUT',\r\n      headers: {\r\n        Authorization: `Bearer ${props.token}`\r\n      }\r\n    })\r\n    .then(() => setIsPlaying(false))\r\n  }\r\n\r\n  return (\r\n    <div className=\"player-footer-container\">\r\n      {currentlyPlaying && (\r\n        <>\r\n          <div className=\"player-footer-progress-container\">\r\n            <div className=\"player-footer-progress\" style={progressStyles}></div>\r\n          </div>\r\n          <div className=\"player-footer\">\r\n            <div className=\"player-footer-main\">\r\n              <div className=\"player-footer-info\">\r\n                <p>\r\n                  {currentlyPlaying.item.name}\r\n                  <i className=\"fas fa-circle\"></i>\r\n                  <span className=\"player-footer-artists\">{currentlyPlaying.item.artists.map(artist => artist.name).join(\", \")}</span>\r\n                </p>\r\n              </div>\r\n              <img className=\"player-footer-img\" src={currentlyPlaying.item.album.images[1].url}/>\r\n            </div>\r\n            <button onClick={isPlaying ? pause : play} className=\"player-footer-btn\">{isPlaying ? <i className=\"fas fa-pause\"></i> : <i className=\"fas fa-play\"></i>}</button>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default PlayerFooter;\r\n","import React, {useState, useEffect} from 'react';\nimport {Switch, Route, useHistory} from 'react-router-dom';\nimport './App.css';\nimport Home from './components/Home';\nimport Player from './components/Player';\nimport PlayerFooter from './components/PlayerFooter';\n\nexport const authEndpoint = 'https://accounts.spotify.com/authorize';\n// Replace with your app's client ID, redirect URI and desired scopes\nconst clientId = \"5ab1ad0488a045ada24732decaec33d3\";\nconst redirectUri = \"http://localhost:3000\";\nconst scopes = [\n  \"user-read-currently-playing\",\n  \"user-read-playback-state\",\n  \"user-modify-playback-state\",\n  \"streaming\",\n  \"user-read-email\",\n  \"user-read-private\"\n];\n\nfunction App() {\n  const [currentUri, setCurrentUri] = useState(\"\");\n  const [token, setToken] = useState(null);\n  const [item, setItem] = useState({\n      album: {\n        images: [{ url: \"\" }]\n      },\n      name: \"\",\n      artists: [{ name: \"\" }],\n      duration_ms: 0\n  });\n  const history = useHistory();\n\n  useEffect(() => {\n    const hash = window.location.hash\n      .substring(1)\n      .split(\"&\")\n      .reduce(function(initial, item) {\n        if (item) {\n          var parts = item.split(\"=\");\n          initial[parts[0]] = decodeURIComponent(parts[1]);\n        }\n        return initial;\n      }, {});\n\n    window.location.hash = \"\";\n\n    let accessToken = hash.access_token;\n\n    if (accessToken) {\n      setToken(accessToken);\n      history.push('/search')\n    }\n\n  }, [])\n\n  return (\n    <div className=\"App\">\n      <Switch>\n        <Route exact path=\"/\">\n          {!token && (\n            <Home\n              authEndpoint={authEndpoint}\n              clientId={clientId}\n              redirectUri={redirectUri}\n              scopes={scopes}\n            />\n          )}\n        </Route>\n        <Route path=\"/search\">\n          {(token) && (\n            <Player setCurrentUri={setCurrentUri} token={token}/>\n          )}\n        </Route>\n      </Switch>\n      <footer>\n        {(token) && (\n          <PlayerFooter currentUri={currentUri} token={token}/>\n        )}\n      </footer>\n    </div>\n  );\n\n}\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {BrowserRouter as Router} from 'react-router-dom';\nimport App from './App';\n\n\nReactDOM.render(\n  <Router>\n    <App />\n  </Router>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}